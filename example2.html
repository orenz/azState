<!DOCTYPE html>
<body>
    watch the console log on dev tools
</body>    

   

    <script type="module">

    import * as w from "./azState.js";

    
    
    let state ={people:[{name:"MR A"},{name:{f:"MR B",l:"the scond"} }],subState:{title:"this is substate"}}


    state=w.createState(state,true);    
    
    //watch different paths
    w.addWatch(state,(path)=>{console.log("watch all",path)})
    w.addWatch(state,'people',(path)=>{console.log("watch people",path)})
    w.addWatch(state,'subState.title',(path)=>{console.log("watch subState.title",path)})

   console.log("zzz part2")
    let PartOfState = state.people[1];
   //watch part of the state
   w.addWatch(PartOfState,(path)=>{console.log("only people 1111",path)})
   w.addWatch(PartOfState,"name",(path)=>{console.log("only people 222",path)})
    
   console.log(state.people);
   state.aa={xx:1,yy:2}
   state.people.push({name:"MR C"})
   state.people[0].name="kuku"
   state.subState.y=5555;   
   state.subState.title="new title";

   PartOfState.name.f="zzzzz";

    
    
    

    </script>

</html>